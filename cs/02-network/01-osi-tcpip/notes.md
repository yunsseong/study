# OSI 7계층 & TCP/IP 모델

## OSI 7계층

네트워크 통신을 **7개의 계층으로 분리**한 표준 모델. 각 계층은 독립적으로 동작.

```
7. 응용 계층 (Application)     ← HTTP, FTP, SMTP, DNS
6. 표현 계층 (Presentation)    ← 암호화, 인코딩, 압축
5. 세션 계층 (Session)         ← 연결 관리, 동기화
4. 전송 계층 (Transport)       ← TCP, UDP (포트 번호)
3. 네트워크 계층 (Network)     ← IP, 라우팅 (IP 주소)
2. 데이터링크 계층 (Data Link) ← 이더넷, MAC (MAC 주소)
1. 물리 계층 (Physical)        ← 전기 신호, 케이블, 허브
```

### 계층별 정리

| 계층 | 역할 | PDU (데이터 단위) | 장비 | 프로토콜 |
|------|------|-------------------|------|---------|
| 7 응용 | 사용자 인터페이스 | 데이터 | - | HTTP, DNS, SMTP |
| 6 표현 | 데이터 변환/암호화 | 데이터 | - | SSL/TLS, JPEG |
| 5 세션 | 연결 설정/관리 | 데이터 | - | NetBIOS |
| 4 전송 | 프로세스 간 통신 | **세그먼트** | - | TCP, UDP |
| 3 네트워크 | 논리적 주소 지정, 경로 결정 | **패킷** | 라우터 | IP, ICMP |
| 2 데이터링크 | 물리적 주소 지정, 오류 검출 | **프레임** | 스위치 | Ethernet, ARP |
| 1 물리 | 비트 전송 | **비트** | 허브, 케이블 | - |

### 왜 계층을 나누는가?

1. **독립성**: 한 계층을 변경해도 다른 계층에 영향 없음
2. **표준화**: 각 계층별 프로토콜 독립 개발 가능
3. **디버깅**: 문제 발생 시 어떤 계층 문제인지 파악 용이

---

## TCP/IP 4계층

실제 인터넷에서 사용하는 모델. OSI보다 간소화.

```
4. 응용 계층 (Application)     = OSI 5, 6, 7
3. 전송 계층 (Transport)       = OSI 4
2. 인터넷 계층 (Internet)      = OSI 3
1. 네트워크 접근 계층 (Network Access) = OSI 1, 2
```

### OSI vs TCP/IP 비교

| 비교 | OSI | TCP/IP |
|------|-----|--------|
| 계층 수 | 7계층 | 4계층 |
| 성격 | 이론적 참조 모델 | 실무 구현 모델 |
| 개발 | ISO | DARPA (미 국방부) |
| 사용 | 교육, 설계 참조 | 실제 인터넷 통신 |

---

## 데이터 전송 흐름 (캡슐화 / 역캡슐화)

### 캡슐화 (Encapsulation) - 보내는 쪽

```
[데이터]
→ [TCP 헤더 | 데이터]                    ← 전송 계층: 세그먼트
→ [IP 헤더 | TCP 헤더 | 데이터]          ← 네트워크 계층: 패킷
→ [MAC 헤더 | IP 헤더 | TCP 헤더 | 데이터 | MAC 트레일러] ← 데이터링크: 프레임
→ 0101010101...                          ← 물리 계층: 비트
```

### 역캡슐화 (Decapsulation) - 받는 쪽

위 과정을 역순으로, 각 계층에서 헤더를 벗겨내며 원래 데이터 복원.

---

## 핵심 개념

### IP 주소 vs MAC 주소

| 비교 | IP 주소 | MAC 주소 |
|------|--------|---------|
| 계층 | 네트워크 (3계층) | 데이터링크 (2계층) |
| 길이 | 32비트 (IPv4) | 48비트 |
| 형태 | 192.168.0.1 | AA:BB:CC:DD:EE:FF |
| 변경 | 네트워크 이동 시 변경 | 하드웨어 고유값 (불변) |
| 범위 | 논리적 주소 (소프트웨어) | 물리적 주소 (하드웨어) |
| 비유 | 우편번호 (변경 가능) | 주민등록번호 (고유) |

### ARP (Address Resolution Protocol)

IP 주소 → MAC 주소로 변환하는 프로토콜.

```
1. "192.168.0.5의 MAC 주소가 뭐야?" → 브로드캐스트로 질문
2. 해당 IP를 가진 장비가 자신의 MAC 주소를 응답
3. ARP 테이블에 캐싱하여 재사용
```

### 포트 번호

같은 IP 내에서 **프로세스를 구분**하는 번호 (전송 계층).

| 범위 | 종류 | 예시 |
|------|------|------|
| 0~1023 | Well-known | 80(HTTP), 443(HTTPS), 22(SSH), 53(DNS) |
| 1024~49151 | Registered | 3306(MySQL), 5432(PostgreSQL), 8080 |
| 49152~65535 | Dynamic | 클라이언트가 임시로 사용 |

---

## 면접 예상 질문

1. **OSI 7계층을 설명해주세요**
   - 각 계층의 역할, PDU, 대표 프로토콜

2. **OSI와 TCP/IP 모델의 차이점은?**
   - 이론 vs 실무, 7계층 vs 4계층

3. **캡슐화란?**
   - 각 계층에서 헤더를 붙여 하위 계층으로 전달하는 과정

4. **IP 주소와 MAC 주소의 차이는?**
   - 논리적 vs 물리적, 변경 가능 vs 고유

5. **ARP가 필요한 이유는?**
   - 같은 네트워크 내에서 IP → MAC 변환 필요
